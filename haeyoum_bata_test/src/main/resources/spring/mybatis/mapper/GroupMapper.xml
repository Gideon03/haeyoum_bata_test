<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="group.model.GroupMapper">

	<select id="selectGroup" parameterType="hashmap" resultType="room">
	select * from haeyoum.group 
	where room_id = #{room_id}
	</select>
	
	<select id="inviteGroup" parameterType="hashmap" resultType="room">
	select * from haeyoums 
	where roomkey like #{roomkey}
	</select>
	
	<select id="confirmCode" parameterType="hashmap" resultType="int">
	select count(*) from haeyoums 
	where roomkey like #{roomkey}
	</select>
	
	<select id="groupList" parameterType="hashmap" resultType="roomList">
	select room_id, title, intro 
	from (haeyoums) join (haeyoum_member)
	using (room_id)
	where group_member_id like #{member_id}
	limit #{stPage}, 11;
	</select>
	
	<insert id="insertGroup"  useGeneratedKeys="true" keyProperty="group_id" parameterType="room">
	insert into haeyoum.group (group_name, group_max, group_regdate, group_admin_id, group_code)
	values (#{group_name}, #{group_max}, now(), #{group_admin_id}, #{group_code})
	</insert>
	
	<update id="updateGroup" parameterType="room">
	update haeyoum.group 
	set group_name = #{group_name} 
	where group_id = #{group_id}
	</update>
		
	<delete id="deleteGroup" parameterType="room">
	delete from haeyoum.group 
	where group_id = #{group_id}
	</delete>
	
	
	
</mapper>